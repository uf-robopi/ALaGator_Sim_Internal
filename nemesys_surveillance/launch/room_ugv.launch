<?xml version="1.0" encoding="UTF-8"?>
<!-- =====================================
Author : Adnan Abdullah
Email: adnanabdullah@ufl.edu
===================================== -->

<launch>
  <!-- ===================== -->
  <!-- Launch arguments -->
  <!-- ===================== -->
  <arg name="use_sim_time" default="true"/>

  <!-- Gazebo options -->
  <arg name="debug" default="false"/>
  <arg name="gui" default="true"/>
  <arg name="headless" default="false"/>
  <arg name="pause" default="false"/>

  <!-- World -->
  <arg name="world" default="room"/>

  <!-- Robot -->
  <arg name="robot_model" default="$(find motion_plan)/resource/urdf/my_robot.xacro"/>
  <arg name="robot_name" default="my_robot"/>

  <!-- Spawn pose -->
  <arg name="x" default="0"/>
  <arg name="y" default="0"/>
  <arg name="z" default="0.5"/>
  <arg name="R" default="0.0"/>
  <arg name="P" default="0.0"/>
  <arg name="Y" default="0.0"/>

    <!-- ===================== -->
  <!-- Hydrophones (8x) SIMPLE SETUP -->
  <!-- Room walls at x=±10, y=±10, floor z=0 -->
  <!-- floor: vertical cylinders -->
  <!-- wall: roll 90deg so circular face attaches to wall -->
  <!-- ===================== -->

  <!-- FLOOR (vertical) -->
  <arg name="h1_x" default="-5.0"/>  <arg name="h1_y" default="-5.0"/>  <arg name="h1_z" default="0.10"/>
  <arg name="h1_R" default="0.0"/>   <arg name="h1_P" default="0.0"/>   <arg name="h1_Y" default="0.0"/>

  <arg name="h2_x" default="5.0"/>   <arg name="h2_y" default="5.0"/>   <arg name="h2_z" default="0.10"/>
  <arg name="h2_R" default="0.0"/>   <arg name="h2_P" default="0.0"/>   <arg name="h2_Y" default="0.0"/>

  <!-- LOW WALL (z = 1.5m) -->
  <!-- East wall (x=+10): roll 90°, yaw 180° to face into room -->
  <arg name="h3_x" default="10.0"/>  <arg name="h3_y" default="0.0"/>   <arg name="h3_z" default="1.50"/>
  <arg name="h3_R" default="1.5708"/><arg name="h3_P" default="0.0"/>   <arg name="h3_Y" default="-1.5708"/>

  <!-- West wall (x=-10): roll 90°, yaw 0° -->
  <arg name="h4_x" default="-10.0"/> <arg name="h4_y" default="3.0"/>   <arg name="h4_z" default="1.50"/>
  <arg name="h4_R" default="1.5708"/><arg name="h4_P" default="0.0"/>   <arg name="h4_Y" default="1.5708"/>

  <!-- North wall (y=+10): roll 90°, yaw -90° -->
  <arg name="h5_x" default="-3.0"/>  <arg name="h5_y" default="10.0"/>  <arg name="h5_z" default="1.50"/>
  <arg name="h5_R" default="1.5708"/><arg name="h5_P" default="0.0"/>   <arg name="h5_Y" default="0"/>

  <!-- HIGH WALL (z = 7.5m) -->
  <!-- South wall (y=-10): roll 90°, yaw +90° -->
  <arg name="h6_x" default="3.0"/>   <arg name="h6_y" default="-10.0"/> <arg name="h6_z" default="7.50"/>
  <arg name="h6_R" default="1.5708"/><arg name="h6_P" default="0.0"/>   <arg name="h6_Y" default="3.1416"/>

  <!-- East wall (x=+10): roll 90°, yaw 180° -->
  <arg name="h7_x" default="10.0"/>  <arg name="h7_y" default="-4.0"/>  <arg name="h7_z" default="7.50"/>
  <arg name="h7_R" default="1.5708"/><arg name="h7_P" default="0.0"/>   <arg name="h7_Y" default="-1.5708"/>

  <!-- West wall (x=-10): roll 90°, yaw 0° -->
  <arg name="h8_x" default="-10.0"/> <arg name="h8_y" default="-2.0"/>  <arg name="h8_z" default="7.50"/>
  <arg name="h8_R" default="1.5708"/><arg name="h8_P" default="0.0"/>   <arg name="h8_Y" default="1.5708"/>



  <!-- ===================== -->
  <!-- Sim time -->
  <!-- ===================== -->
  <param name="/use_sim_time" value="$(arg use_sim_time)"/>

  <!-- ===================== -->
  <!-- Launch Gazebo with room.world -->
  <!-- ===================== -->
  <include file="$(find gazebo_ros)/launch/empty_world.launch">
    <arg name="world_name" value="$(find motion_plan)/resource/worlds/$(arg world).world"/>
    <arg name="debug" value="$(arg debug)"/>
    <arg name="gui" value="$(arg gui)"/>
    <arg name="paused" value="$(arg pause)"/>
    <arg name="use_sim_time" value="$(arg use_sim_time)"/>
    <arg name="headless" value="$(arg headless)"/>
  </include>

  <!-- ===================== -->
  <!-- Robot description + TF -->
  <!-- ===================== -->
  <param name="robot_description" command="$(find xacro)/xacro $(arg robot_model)" />

  <node pkg="robot_state_publisher" type="robot_state_publisher" name="robot_state_publisher">
    <param name="publish_frequency" type="double" value="100.0" />
  </node>

  <!-- Spawn robot in Gazebo -->
  <node name="robot_spawn" pkg="gazebo_ros" type="spawn_model" output="screen"
        args="-urdf -param robot_description -model $(arg robot_name)
              -x $(arg x) -y $(arg y) -z $(arg z)
              -R $(arg R) -P $(arg P) -Y $(arg Y)" />

  <!-- ===================== -->
  <!-- Spawn 8 static hydrophones -->
  <!-- Using the same SDF model file for all -->
  <!-- ===================== -->
  <node pkg="gazebo_ros" type="spawn_model" name="spawn_hydrophone_1" output="screen"
        args="-file $(find uw_acoustics)/models/hydro_static/model.sdf
              -sdf -model hydrophone_1
              -x $(arg h1_x) -y $(arg h1_y) -z $(arg h1_z)
              -R $(arg h1_R) -P $(arg h1_P) -Y $(arg h1_Y)" />

  <node pkg="gazebo_ros" type="spawn_model" name="spawn_hydrophone_2" output="screen"
        args="-file $(find uw_acoustics)/models/hydro_static/model.sdf
              -sdf -model hydrophone_2
              -x $(arg h2_x) -y $(arg h2_y) -z $(arg h2_z)
              -R $(arg h2_R) -P $(arg h2_P) -Y $(arg h2_Y)" />

  <node pkg="gazebo_ros" type="spawn_model" name="spawn_hydrophone_3" output="screen"
        args="-file $(find uw_acoustics)/models/hydro_static/model.sdf
              -sdf -model hydrophone_3
              -x $(arg h3_x) -y $(arg h3_y) -z $(arg h3_z)
              -R $(arg h3_R) -P $(arg h3_P) -Y $(arg h3_Y)" />

  <node pkg="gazebo_ros" type="spawn_model" name="spawn_hydrophone_4" output="screen"
        args="-file $(find uw_acoustics)/models/hydro_static/model.sdf
              -sdf -model hydrophone_4
              -x $(arg h4_x) -y $(arg h4_y) -z $(arg h4_z)
              -R $(arg h4_R) -P $(arg h4_P) -Y $(arg h4_Y)" />

  <node pkg="gazebo_ros" type="spawn_model" name="spawn_hydrophone_5" output="screen"
        args="-file $(find uw_acoustics)/models/hydro_static/model.sdf
              -sdf -model hydrophone_5
              -x $(arg h5_x) -y $(arg h5_y) -z $(arg h5_z)
              -R $(arg h5_R) -P $(arg h5_P) -Y $(arg h5_Y)" />

  <node pkg="gazebo_ros" type="spawn_model" name="spawn_hydrophone_6" output="screen"
        args="-file $(find uw_acoustics)/models/hydro_static/model.sdf
              -sdf -model hydrophone_6
              -x $(arg h6_x) -y $(arg h6_y) -z $(arg h6_z)
              -R $(arg h6_R) -P $(arg h6_P) -Y $(arg h6_Y)" />

  <node pkg="gazebo_ros" type="spawn_model" name="spawn_hydrophone_7" output="screen"
        args="-file $(find uw_acoustics)/models/hydro_static/model.sdf
              -sdf -model hydrophone_7
              -x $(arg h7_x) -y $(arg h7_y) -z $(arg h7_z)
              -R $(arg h7_R) -P $(arg h7_P) -Y $(arg h7_Y)" />

  <node pkg="gazebo_ros" type="spawn_model" name="spawn_hydrophone_8" output="screen"
        args="-file $(find uw_acoustics)/models/hydro_static/model.sdf
              -sdf -model hydrophone_8
              -x $(arg h8_x) -y $(arg h8_y) -z $(arg h8_z)
              -R $(arg h8_R) -P $(arg h8_P) -Y $(arg h8_Y)" />

</launch>
