<?xml version="1.0" ?>

<!-- =====================================
Author : Adnan Abdullah (sourced from cavepi urdf written by Alankrit Gupta)
Email: adnanabdullah@ufl.edu
===================================== -->

<robot name="nemesys" xmlns:xacro="http://www.ros.org/wiki/xacro">

    <xacro:property name="tube_od" value="0.1651" /> 
    <xacro:property name="tube_id" value="0.1524" /> 
    <xacro:property name="tube_length" value="0.29845" />
    <xacro:property name="scale_size" value="1.0" />
    <xacro:property name="negligible_mass" value="1.0e-6" />
    <xacro:property name="negligible_inertia" value="1.0e-12" />
    <xacro:property name="negligible_volume" value="1.0e-9" />


    <material name="Custom_Color">
        <color rgba="0.3 0.9 0.1 0.8" />
    </material>

    <material name="Orange">
        <color rgba="1.0 0.43 0.04 0.8" />
    </material>

    <material name="Black">
        <color rgba="0 0 0 0.8" />
    </material>

    <material name="Green">
        <color rgba="0.0 0.8 0.0 1.0" />
    </material>
    
    <!-- base_link DEFINITION -->
    <!-- <link name="base_link" /> -->


    <!-- base_link DEFINITION -->
    <link name="base_link">
        <visual>
            <geometry>
                <mesh filename="package://nemesys_surveillance/meshes/NemeSys_adjusted.stl" 
                      scale="${scale_size} ${scale_size} ${scale_size}" />
            </geometry>
            <origin xyz="0 0 0" rpy="0 0 0" />
            <material name="Custom_Color" />
        </visual>

        <collision>
            <geometry>
                <mesh filename="package://nemesys_surveillance/meshes/NemeSys_adjusted.stl" 
                      scale="${scale_size} ${scale_size} ${scale_size}" />
            </geometry>
            <origin xyz="0 0 0" rpy="0 0 0" /> 
        </collision>

        <inertial>
            <!-- Put COM at 0 initially unless you KNOW it's offset -->
            <origin xyz="0 0 0" rpy="0 0 0"/>
            <mass value="8.6"/>
            <inertia
                ixx="0.02930236" ixy="0.0" ixz="0.0"
                iyy="0.07848640" iyz="0.0"
                izz="0.07848640"/>
        </inertial>

    </link>

    <!-- front_right_thruster_link_nemesys DEFINITION -->
    <link name="front_right_thruster_link_nemesys">
        <visual>
            <geometry>
                <mesh filename="package://nemesys_surveillance/meshes/front_right_thruster_link_nemesys.STL"
                      scale="${scale_size} ${scale_size} ${scale_size}" />
            </geometry>
            <origin xyz="0 0 0" rpy="0 0 0" />
            <material name="Green" />
        </visual>
 
        <collision>
            <geometry>
                <mesh filename="package://nemesys_surveillance/meshes/front_right_thruster_link_nemesys.STL"
                      scale="${scale_size} ${scale_size} ${scale_size}" />
            </geometry>
            <origin xyz="0 0 0" rpy="0 0 0" />
        </collision>
 
        <inertial>
            <origin xyz="0 0 ${scale_size*7.53e-3}" rpy="0 0 0" />
            <mass value="7.74e-3" />
            <inertia ixx="2207.32e-9" ixy="-0.26e-9" ixz="0.03e-9"
                     iyy="2207.13e-9" iyz="0.04e-9"
                     izz="3214.96e-9" />
        </inertial>
    </link>
 
    <!-- base_link TO front_right_thruster_link_nemesys JOINT DEFINITION -->
    <joint name="body_to_fr_thruster_joint" type="continuous">
        <parent link="base_link" />
        <child link="front_right_thruster_link_nemesys" />
        <origin xyz="${scale_size*0.0} ${scale_size*-0.24} ${scale_size*0.0}" rpy="0 0 0"/>
        <axis xyz="0 0 1" />
    </joint>


    <!-- front_left_thruster_link_nemesys DEFINITION -->
    <link name="front_left_thruster_link_nemesys">
        <visual>
            <geometry>
                <mesh filename="package://nemesys_surveillance/meshes/front_left_thruster_link_nemesys.STL"
                      scale="${scale_size} ${scale_size} ${scale_size}" />
            </geometry>
            <origin xyz="0 0 0" rpy="0 0 0" />
            <material name="Green" />
        </visual>
 
        <collision>
            <geometry>
                <mesh filename="package://nemesys_surveillance/meshes/front_left_thruster_link_nemesys.STL"
                      scale="${scale_size} ${scale_size} ${scale_size}" />
            </geometry>
            <origin xyz="0 0 0" rpy="0 0 0" />
        </collision>
 
        <inertial>
            <origin xyz="0 0 ${scale_size*7.53e-3}" rpy="0 0 0" />
            <mass value="7.74e-3" />
            <inertia ixx="2207.32e-9" ixy="-0.26e-9" ixz="0.03e-9"
                     iyy="2207.13e-9" iyz="0.04e-9"
                     izz="3214.96e-9" />
        </inertial>
    </link>
 
    <!-- base_link TO front_left_thruster_link_nemesys JOINT DEFINITION -->
    <joint name="body_to_fl_thruster_joint" type="continuous">
        <parent link="base_link" />
        <child link="front_left_thruster_link_nemesys" />
        <origin xyz="${scale_size*0.0} ${scale_size*0.24} ${scale_size*0.0}" rpy="0 0 0"/>  
        <axis xyz="0 0 1" />
    </joint>


    <!-- rear_right_thruster_link_nemesys DEFINITION -->
    <link name="rear_right_thruster_link_nemesys">
        <visual>
            <geometry>
                <mesh filename="package://nemesys_surveillance/meshes/rear_right_thruster_link_nemesys.STL"
                      scale="${scale_size} ${scale_size} ${scale_size}" />
            </geometry>
            <origin xyz="0 0 0" rpy="0 ${pi/2} 0" />
            <material name="Green" />
        </visual>
 
        <collision>
            <geometry>
                <mesh filename="package://nemesys_surveillance/meshes/rear_right_thruster_link_nemesys.STL"
                      scale="${scale_size} ${scale_size} ${scale_size}" />
            </geometry>
            <origin xyz="0 0 0" rpy="0 ${pi/2} 0" />
        </collision>
 
        <inertial>  
            <origin xyz="0 0 ${scale_size*7.53e-3}" rpy="0 0 0" />
            <mass value="7.74e-3" />
            <inertia ixx="2207.32e-9" ixy="-0.26e-9" ixz="0.03e-9"
                     iyy="2207.13e-9" iyz="0.04e-9"
                     izz="3214.96e-9" />
        </inertial>
    </link>
 
    <!-- base_link TO rear_right_thruster_link_nemesys JOINT DEFINITION -->
    <joint name="body_to_rr_thruster_joint" type="continuous">
        <parent link="base_link" />
        <child link="rear_right_thruster_link_nemesys" />
        <origin xyz="${scale_size*-0.27} ${scale_size*-0.11} ${scale_size*0.0}" rpy="0 0 0"/>  
        <axis xyz="1 0 0" />
    </joint>


    <!-- rear_left_thruster_link_nemesys DEFINITION -->
    <link name="rear_left_thruster_link_nemesys">
        <visual>
            <geometry>
                <mesh filename="package://nemesys_surveillance/meshes/rear_left_thruster_link_nemesys.STL"
                      scale="${scale_size} ${scale_size} ${scale_size}" />
            </geometry>
            <origin xyz="0 0 0" rpy="0 ${-pi/2} 0" />
            <material name="Green" />
        </visual>
 
        <collision>
            <geometry>
                <mesh filename="package://nemesys_surveillance/meshes/rear_left_thruster_link_nemesys.STL"
                      scale="${scale_size} ${scale_size} ${scale_size}" />
            </geometry>
            <origin xyz="0 0 0" rpy="0 ${-pi/2} 0" />
        </collision>
 
        <inertial>  
            <origin xyz="0 0 ${scale_size*7.53e-3}" rpy="0 0 0" />
            <mass value="7.74e-3" />
            <inertia ixx="2207.32e-9" ixy="-0.26e-9" ixz="0.03e-9"
                     iyy="2207.13e-9" iyz="0.04e-9"
                     izz="3214.96e-9" />
        </inertial>
    </link>
 
    <!-- base_link TO rear_left_thruster_link_nemesys JOINT DEFINITION -->
    <joint name="body_to_rl_thruster_joint" type="continuous">
        <parent link="base_link" />
        <child link="rear_left_thruster_link_nemesys" />
        <origin xyz="${scale_size*-0.27} ${scale_size*0.11} ${scale_size*-0.0}" rpy="0 0 0"/>  
        <axis xyz="1 0 0" />
    </joint>


    <!-- downward_camera_link DEFINITION -->
    <link name="downward_camera_link">
        <visual>
            <geometry>
                <sphere radius = "${scale_size*0.001}"/>
            </geometry>
            <origin xyz="0 0 0" rpy="0 0 0" />
            <material name="Black" />
        </visual>
 
        <collision>
            <geometry>
                <sphere radius = "${scale_size*0.001}"/>
            </geometry>
            <origin xyz="0 0 0" rpy="0 0 0" />
        </collision>
 
        <inertial>
            <origin xyz="0 0 0" rpy="0 0 0" />
            <mass value="${negligible_mass}" />
            <inertia ixx="${negligible_inertia}" ixy="0" ixz="0"
                     iyy="${negligible_inertia}" iyz="0"
                     izz="${negligible_inertia}" />
        </inertial>
    </link>
 
    <!-- base_link TO downward_camera_link JOINT DEFINITION -->
    <joint name="body_to_down_cam_joint" type="fixed">
        <parent link="base_link" />
        <child link="downward_camera_link" />
        <origin xyz="${scale_size*0.14591} 0 ${scale_size*-0.2687}" rpy="0 ${pi/2} 0"/>  
    </joint>


    <!-- front_camera_link DEFINITION -->
    <link name="front_camera_link">
        <visual>
            <geometry>
                <sphere radius = "${scale_size*0.001}"/>
            </geometry>
            <origin xyz="0 0 0" rpy="0 0 0" />
            <material name="Black" />
        </visual>
 
        <collision>
            <geometry>
                <sphere radius = "${scale_size*0.001}"/>
            </geometry>
            <origin xyz="0 0 0" rpy="0 0 0" />
        </collision>
 
        <inertial>
            <origin xyz="0 0 0" rpy="0 0 0" />
            <mass value="${negligible_mass}" />
            <inertia ixx="${negligible_inertia}" ixy="0" ixz="0"
                     iyy="${negligible_inertia}" iyz="0"
                     izz="${negligible_inertia}" />
        </inertial>
    </link>
 
    <!-- base_link TO front_camera_link JOINT DEFINITION -->
    <joint name="body_to_front_cam_joint" type="fixed">
        <parent link="base_link" />
        <child link="front_camera_link" />
        <origin xyz="${scale_size*0.32} 0 0" rpy="0 0 0"/>  
    </joint>


    <!-- bar30_sensor_link DEFINITION -->
    <link name="bar30_sensor_link">
        <visual>
            <geometry>
                <sphere radius = "${scale_size*0.001}"/>
            </geometry>
            <origin xyz="0 0 0" rpy="0 0 0" />
            <material name="Black" />
        </visual>
 
        <!-- <collision>
            <geometry>
                <sphere radius = "${scale_size*0.001}"/>
            </geometry>
            <origin xyz="0 0 0" rpy="0 0 0" />
        </collision> -->
 
        <inertial>
            <origin xyz="0 0 0" rpy="0 0 0" />
            <mass value="${negligible_mass}" />
            <inertia ixx="${negligible_inertia}" ixy="0" ixz="0"
                     iyy="${negligible_inertia}" iyz="0"
                     izz="${negligible_inertia}" />
        </inertial>
    </link>
 
    <!-- base_link TO bar30_sensor_link JOINT DEFINITION -->
    <joint name="body_to_bar30_joint" type="fixed">
        <parent link="base_link" />
        <child link="bar30_sensor_link" />
        <origin xyz="${scale_size*0} 0 ${scale_size*0.01}" rpy="0 0 0"/>  
    </joint>


    <!-- imu_link DEFINITION -->
    <link name="imu_link">
        <visual>
            <geometry>
                <sphere radius = "${scale_size*0.001}"/>
            </geometry>
            <origin xyz="0 0 0" rpy="0 0 0" />
            <material name="Black" />
        </visual>
 
        <collision>
            <geometry>
                <sphere radius = "${scale_size*0.001}"/>
            </geometry>
            <origin xyz="0 0 0" rpy="0 0 0" />
        </collision>
 
        <inertial>
            <origin xyz="0 0 0" rpy="0 0 0" />
            <mass value="${negligible_mass}" />
            <inertia ixx="${negligible_inertia}" ixy="0" ixz="0"
                     iyy="${negligible_inertia}" iyz="0"
                     izz="${negligible_inertia}" />
        </inertial>
    </link>
 
    <!-- base_link TO imu_link JOINT DEFINITION -->
    <joint name="body_to_imu_joint" type="fixed">
        <parent link="base_link" />
        <child link="imu_link" />
        <origin xyz="0 0 0" rpy="0 0 0"/>
    </joint>


    <!-- hydrophone_link DEFINITION -->
    <link name="hydrophone_link">
        <visual>
            <origin xyz="0 0 0" rpy="0 0 0"/>
            <geometry>
            <cylinder radius="0.01" length="0.03"/>
            </geometry>
            <material name="Green">
            <color rgba="0 1 0 1"/>
            </material>
        </visual>

        <collision>
            <origin xyz="0 0 0" rpy="0 0 0"/>
            <geometry>
            <cylinder radius="0.01" length="0.03"/>
            </geometry>
        </collision>

        <inertial>
            <origin xyz="0 0 0" rpy="0 0 0"/>
            <mass value="1e-4"/>
            <!-- For r=0.02 m, h=0.05 m, m=1e-4 kg (solid cylinder, axis = z): -->
            <inertia
            ixx="3.083333333e-08" ixy="0" ixz="0"
            iyy="3.083333333e-08" iyz="0"
            izz="2.0e-08"/>
        </inertial>
    </link>

        <joint name="body_to_hydrophone_joint" type="fixed">
        <parent link="base_link"/>
        <child link="hydrophone_link"/>
        <origin xyz="0.0 0.0 0.0" rpy="0 0 0"/>
        </joint>



    <!-- GAZEBO PLUGINS -->

    <!-- Model-level Gazebo plugin: Hydrophone on the ROV -->
    <gazebo>
    <plugin name="hydrophone_on_rov" filename="libgazebo_hydrophone_sub.so">
        <source_audio_topic>/acoustics/source_audio</source_audio_topic>
        <!-- Required/recognized params by HydrophonePlugin -->
        <out_topic>/hydrophones/rov</out_topic>

        <!-- This must match the spawned acoustic sourceâ€™s model name -->
        <source_model>mobile_acoustic_source</source_model>
        <!-- And the link on that model -->
        <source_link>source_link</source_link>

        <!-- The link on THIS robot to sample pose from -->
        <hydro_link>hydrophone_link</hydro_link>

        <!-- Signal and sim params -->
        <signal_type>tone</signal_type>         <!-- tone | noise -->
        <fs>48000</fs>
        <amplitude>1.0</amplitude>
        <start_time>0.0</start_time>
        <speed_of_sound>1482.0</speed_of_sound>
        <block_size>1024</block_size>
        <loss_model>none</loss_model>         <!-- none | inverse | inverse_square -->
        <noise_std>0.0</noise_std>
        <buffer_seconds>5.0</buffer_seconds>
        <output_latency_blocks>0</output_latency_blocks>
        
        <directionality>cosine</directionality>          <!-- none|cosine|cosine_power -->
        <dir_axis>1 0 0</dir_axis>                       <!-- source-local axis (default +X) -->
        <dir_rate>1.0</dir_rate>                         <!-- multiplier inside cos(rate*alpha) -->
        <dir_power>1.0</dir_power>                       <!-- for cosine_power -->
        <dir_min>0.0</dir_min>                           <!-- clamp -->
        <dir_max>1.0</dir_max>
    </plugin>
    </gazebo>

    <gazebo>
        <plugin name="fr_thruster_joint_state_pub" filename="libgazebo_ros_joint_state_publisher.so">
            <jointName>body_to_fr_thruster_joint</jointName>
        </plugin>
    </gazebo>

    <gazebo>
        <plugin name="fl_thruster_joint_state_pub" filename="libgazebo_ros_joint_state_publisher.so">
            <jointName>body_to_fl_thruster_joint</jointName>
        </plugin>
    </gazebo>

    <gazebo>
        <plugin name="rr_thruster_joint_state_pub" filename="libgazebo_ros_joint_state_publisher.so">
            <jointName>body_to_rr_thruster_joint</jointName>
        </plugin>
    </gazebo>

    <gazebo>
        <plugin name="rl_thruster_joint_state_pub" filename="libgazebo_ros_joint_state_publisher.so">
            <jointName>body_to_rl_thruster_joint</jointName>
        </plugin>
    </gazebo>

    <gazebo reference="base_link">
        <material>Gazebo/Green</material>
    </gazebo>

    <gazebo reference="front_right_thruster_link_nemesys">
        <material>Gazebo/Blue</material>
    </gazebo>

    <gazebo reference="front_left_thruster_link_nemesys">
        <material>Gazebo/Blue</material>
    </gazebo>

    <gazebo reference="rear_right_thruster_link_nemesys">
        <material>Gazebo/Blue</material>
    </gazebo>

    <gazebo reference="rear_left_thruster_link_nemesys">
        <material>Gazebo/Blue</material>
    </gazebo>


    <!-- BUOYANCY PLUIGN -->
    <gazebo>
        <plugin name="buoyancy" filename="libBuoyancyPlugin.so">
            <fluid_density>1000</fluid_density>
            <link name="base_link">
                <center_of_volume>0 0 0.05</center_of_volume>
                <volume>8.714e-3</volume>  
            </link>

            <link name="front_right_thruster_link_nemesys">
                <center_of_volume>0 0 0</center_of_volume>
                <volume>7.74e-6</volume>
            </link>

            <link name="front_left_thruster_link_nemesys">
                <center_of_volume>0 0 0</center_of_volume>
                <volume>7.74e-6</volume>
            </link>

            <link name="rear_right_thruster_link_nemesys">
                <center_of_volume>0 0 0</center_of_volume>
                <volume>7.74e-6</volume>
            </link>
            
            <link name="rear_left_thruster_link_nemesys">
                <center_of_volume>0 0 0</center_of_volume>
                <volume>7.74e-6</volume>
            </link>
        </plugin>
    </gazebo>


    <!-- PLUGIN FOR CONTROLLING THE ROBOT USING ROS -->
    <gazebo>
        <plugin name="gazebo_ros_control" filename="libgazebo_ros_control.so">
            <robotNamespace>/nemesys</robotNamespace>
        </plugin>
    </gazebo>

    <!-- Added here -->
    <gazebo>
        <plugin name="odom_plugin" filename="libgazebo_ros_p3d.so">
            <alwaysOn>true</alwaysOn>
            <updateRate>50.0</updateRate>
            <bodyName>base_link</bodyName>   <!-- THIS IS REQUIRED -->
            <topicName>odom</topicName>
            <frameName>world</frameName>      <!-- Parent frame -->
            <childFrameName>base_link</childFrameName> <!-- Child frame -->
        </plugin>
    </gazebo>


    <!-- PLUGINS FOR APPLYING FORCES TO ALL THE JOINTS AND BODY OF THE ROBOT -->
    <gazebo>
        <plugin filename="libgazebo_ros_force.so" name="gazebo_ros_force">
            <bodyName>front_right_thruster_link_nemesys</bodyName>
            <topicName>/nemesys/front_right_thrust</topicName>
        </plugin>
    </gazebo>

    <gazebo>
        <plugin filename="libgazebo_ros_force.so" name="gazebo_ros_force">
            <bodyName>front_left_thruster_link_nemesys</bodyName>
            <topicName>/nemesys/front_left_thrust</topicName>
        </plugin>
    </gazebo>

    <gazebo>
        <plugin filename="libgazebo_ros_force.so" name="gazebo_ros_force">
            <bodyName>rear_right_thruster_link_nemesys</bodyName>
            <topicName>/nemesys/rear_right_thrust</topicName>
        </plugin>
    </gazebo>

    <gazebo>
        <plugin filename="libgazebo_ros_force.so" name="gazebo_ros_force">
            <bodyName>rear_left_thruster_link_nemesys</bodyName>
            <topicName>/nemesys/rear_left_thrust</topicName>
        </plugin>
    </gazebo>

    <gazebo>
        <plugin filename="libgazebo_ros_force.so" name="gazebo_ros_force">
            <bodyName>base_link</bodyName>
            <topicName>/nemesys/drag_force</topicName>
        </plugin>
    </gazebo>


    <!-- DOWNWARD CAMERA PLUGIN -->
    <gazebo reference="downward_camera_link">
        <sensor type="camera" name="downward_camera">
            <update_rate>30.0</update_rate>
            <camera name="head">
                <horizontal_fov>1.3962634</horizontal_fov>
                <image>
                    <width>640</width>
                    <height>480</height>
                    <format>R8G8B8</format>
                </image>
                <clip>
                    <near>0.02</near>
                    <far>300</far>
                </clip>
                <noise>
                    <type>gaussian</type>
                    <mean>0.0</mean>
                    <stddev>0.01</stddev>
                </noise>
            </camera>

            <plugin name="camera_controller" filename="libgazebo_ros_camera.so">
                <robotNamespace>/nemesys</robotNamespace>
                <alwaysOn>true</alwaysOn>
                <updateRate>0.0</updateRate>
                <cameraName>downward_camera</cameraName>
                <imageTopicName>image_raw</imageTopicName>
                <cameraInfoTopicName>camera_info</cameraInfoTopicName>
                <frameName>downward_camera_link</frameName>
                <hackBaseline>0.07</hackBaseline>
                <distortionK1>0.0</distortionK1>
                <distortionK2>0.0</distortionK2>
                <distortionK3>0.0</distortionK3>
                <distortionT1>0.0</distortionT1>
                <distortionT2>0.0</distortionT2>
            </plugin>
        </sensor>
        <material>Gazebo/Black</material>
    </gazebo>


    <!-- FRONT CAMERA PLUGIN -->
    <gazebo reference="front_camera_link">
        <sensor type="camera" name="front_camera">
            <update_rate>30.0</update_rate>
            <camera name="head">
                <horizontal_fov>1.3962634</horizontal_fov>
                <image>
                    <width>640</width>
                    <height>480</height>
                    <format>R8G8B8</format>
                </image>
                <clip>
                    <near>0.02</near>
                    <far>300</far>
                </clip>
                <noise>
                    <type>gaussian</type>
                    <mean>0.0</mean>
                    <stddev>0.01</stddev>
                </noise>
            </camera>

            <plugin name="camera_controller" filename="libgazebo_ros_camera.so">
                <robotNamespace>/nemesys</robotNamespace>
                <alwaysOn>true</alwaysOn>
                <updateRate>0.0</updateRate>
                <cameraName>front_camera</cameraName>
                <imageTopicName>image_raw</imageTopicName>
                <cameraInfoTopicName>camera_info</cameraInfoTopicName>
                <frameName>front_camera_link</frameName>
                <hackBaseline>0.07</hackBaseline>
                <distortionK1>0.0</distortionK1>
                <distortionK2>0.0</distortionK2>
                <distortionK3>0.0</distortionK3>
                <distortionT1>0.0</distortionT1>
                <distortionT2>0.0</distortionT2>
            </plugin>
        </sensor>
        <material>Gazebo/Black</material>
    </gazebo>


    <!-- BAR30 SENSOR (DEPTH) PLUGIN -->
    <gazebo reference="bar30_sensor_link">
        <sensor type="ray" name="depth_sensor">
            <!-- Rotate so +X points to +Z (up) -->
            <pose>0 0 0 0 -1.570796 0</pose>

            <visualize>false</visualize>
            <update_rate>10</update_rate>

            <ray>
            <scan>
                <horizontal>
                    <samples>61</samples>
                    <resolution>1</resolution>
                    <min_angle>-0.261799</min_angle>  <!-- -15 deg -->
                    <max_angle> 0.261799</max_angle>  <!-- +15 deg -->
                </horizontal>
            </scan>


            <range>
                <!-- MUST be non-negative -->
                <min>0.05</min>
                <max>200.0</max>
                <resolution>0.01</resolution>
            </range>

            <noise>
                <type>gaussian</type>
                <mean>0.0</mean>
                <stddev>0.01</stddev>
            </noise>
            </ray>

            <plugin name="gazebo_ros_laser" filename="libgazebo_ros_laser.so">
            <topicName>/nemesys/raw_depth_data</topicName>
            <frameName>bar30_sensor_link</frameName>
            </plugin>
        </sensor>
    </gazebo>


    <!-- IMU PLUGIN -->
    <gazebo reference="imu_link">
        <gravity>true</gravity>
        <sensor name="imu_sensor" type="imu">
            <always_on>true</always_on>
            <update_rate>100</update_rate>
            <visualize>true</visualize>
            <topic>__default_topic__</topic>
            <plugin filename="libgazebo_ros_imu_sensor.so" name="imu_plugin">
                <topicName>/nemesys/raw_imu_data</topicName>
                <bodyName>imu_link</bodyName>
                <updateRateHZ>10.0</updateRateHZ>
                <gaussianNoise>0.0</gaussianNoise>
                <xyzOffset>0 0 0</xyzOffset>
                <rpyOffset>0 0 0</rpyOffset>
                <frameName>imu_link</frameName>
                <initialOrientationAsReference>false</initialOrientationAsReference>
            </plugin>
            <pose>0 0 0 0 0 0</pose>
        </sensor>
    </gazebo>
    

</robot>